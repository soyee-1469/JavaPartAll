*데이터베이스 개념
데이터베이스 : 구조화된 데이터의 집합
-여러 사람과 실시간으로 공유하여 사용
-효율적인 데이터 검색
-일관성 있는 방법으로 데이터 관리
-데이터 누락 및 중복제거

*파일시스템을 통한 데이터 관리
서로 다른 여러 응용 프로그램이 제공하는 기능에 맞게 필요한 데이터를 각각 저장하고 관리한다.
각 파일에 저장한 데이터는 서로 연관이 없고 중복 또는 누락이 발생할 수 있다. 

*DBMS(Database Management System)를 통한 데이터베이스 관리 조건을 만족하며 서비스 제공의 효율성을 높이기 위해 데이터베이스 관리 시스템이 등장, 
여러목적으로 사용할 데이터 접근, 관리 등의 업무를 DBMS가 전담하는 방식...DBMS는 자신이 관리하는 데이터베이스 관련 작업을 수행하고 결과 값을 제공한다. 
여러 응용 프로그램이 하나의 통합된 데이터를 같은 방식으로 사용, 관리할 수 있으므로 데이터 누락이나 중복을 방지할 수 있다. 

*데이터모델
컴퓨터에 데이터를 저장하는 방식을 정의해 높은 개념이다. 
대표 데이터 모델로 계층형, 네트워크형, **관계형, 객체 지향형 등이 있다.

관계형 데이터베이스 => RDBMS
SQL(Structure Query Language) => RDBMS에서 데이터를 다루고 관리하는데 사용하는 데이터베이스 질의 언어이다. 

*종류
DQL(Data Query Language)
-RDBMS에 저장한 데이터를 원하는 방식으로 조회하는 명령어
DML(Data Manipulation Language)(insert)
--RDBMS내 테이블의 데이터를 저장, 수정, 삭제 하는 명령어
DDL(Data Definition Language)
-RDBMS 내 데이터 관리를 위해 테이블을 포함한 여러객체를 생성, 수정, 삭제하는 명령어(alter)
TCL(Transaction Control Language)
-트랜잭션 데이터의 영구 저장, 취소 등과 관련된 명령어
DCL(Data Control Language)
-데이터 사용 권한과 관련된 명령어

*테이블 : 표 형태의 데이터 저장공간
(행 :  row, 열 : column)
키(key) : 수많은 데이터를 구별할 수 있는 유일한 값.하나의 테이블을 구성하는 여러 열 중에서 특별한 의미를 지닌 하나 또는 여러열의 조합을 의미한다. 
(기본키 : Primary Key, 후보키 : Candibate Key, 외래키 : Foreign Key, 복합키 : Composite key)

**
EMP : 사원정보
EMPNO : 사원번호
ENAME : 사원이름
JOB : 직책
MGR : 직속상관의 사원번호
HIREDATE : 입사일
SAL : 급여
COMM : 인센티브
DETPNO : 부서번호

**DEPT : 부서정보
DEPTNO : 부서번호
DNAME : 부서이름
LOC : 부서위치

**SALGRAD : 연봉정보
GRADE : 급여등급
LOSAL : 급여등급의 최소 급여액
HISAL : 급여 등급의 최대 급여액

EMP테이블 조회
SELECT * FROM EMP: // EMP 테이블모든 데이터 출력
SELECT DEPTNO, ENAME, JOB FROM EMP ; //원하는항복만 출력 가능

-DISTINCT중복제거정렬
SELECT DISTINCT deptno From EMP; 부서번호만 중복값 제거하고 출력
SELECT DISTINCT deptno, job FROM EMP; // deptno와 job 두개값 중 중복안되면 출력

-- 문제)급여만 추출하시오
SELECT SAL From EMP;
SELECT ENAME, SAL, SAL*12*COMM AS ANNSAL,
       COMM FROM EMP;

*연산
SELECT ENAME, SAL, SAL*12*COMM AS ANNSAL,
COMM FROM EMP;

*ORDER BY  : 정렬
흩어져 있는 데이터를 특정 기준에 따라 가지런히 순서를 맞추는 것은 자원을 많이 사용하기 때문에 꼭 필요한 경우가 아니라면 사용하지 말것.(자바에서 데이터를 가공하는게 낫다)

SELECT * FROM EMP ORDER BY SAL(ASC); // 오름차순
SELECT * FROM EMP ORDER BY SAL DESC // 내림차순

*WHERE : 조건
SELECT * FROM EMP WHERE DEPTNO = 30; //부서번호 30만 나와랏!

-- 사원번호가 7782인 사원정보만 나오도록
SELECT * FROM EMP WHERE EMPNO = 7782;
-- 부서번호가 30이면서 JOB이 SALESMAN인경우
SELECT * FROM EMP WHERE DEPTNO = 30 and JOB = 'SALESMAN';
-- 부서번호가 30이거나 JOB이 SALESMAN인경우
SELECT * FROM EMP WHERE DEPTNO = 30 or JOB = 'SALESMAN';
-- 부서번호가 20이면서 사원번호가 7782인경우
SELECT * FROM EMP WHERE DEPTNO = 20 and EMPNO = 7782;
-- 부서번호가 20이면서 연봉이 1000보다 높은 직원
SELECT * FROM EMP WHERE DEPTNO = 20 and SAL*12 > 1000;
-- 급여가 2500이상 직업이 ANALYST인 사원정보
SELECT * FROM EMP WHERE SAL > 2500 and JOB = 'ANALYST';
-- 연봉이 3000이 아닌경우 정보출력
SELECT * FROM EMP WHERE SAL != 3000;
SELECT * FROM EMP WHERE SAL <> 3000;
SELECT * FROM EMP WHERE NOT SAL= 3000;
-- 10번 부서의 모든 사원에게 급여의 13%를 보너스로 지불하기로 하였다. 이름, 급여, 보너스 금액 부서번호를 출력
SELECT ENAME, SAL, (SAL*0.13) as BONUS, DEPTNO FROM EMP;
-- 사원번호 기준 각각 오름차순, 내림차순
SELECT * FROM emp ORDER BY EMPNO;
SELECT * FROM emp ORDER BY EMPNO DESC;
-- EMP티에블의 전체 열을 부서번호(오름차순)와 급여(내림차순)으로 정렬
SELECT * FROM emp ORDER BY DEPTNO ASC, SAL DESC;
-- job이  MANAGER 이거나 SALESMAN 이거나 CLERK
SELECT * FROM EMP WHERE JOB = 'MANAGER' or JOB = 'SALESMAN' or JOB = 'CLERK';
SELECT * FROM EMP WHERE JOB IN('MANAGER','SALESMAN','CLERK');
-- 반대표현
SELECT * FROM EMP WHERE JOB NOT IN('MANAGER','SALESMAN','CLERK');

-- 연봉이 2000 이상 3000이하
SELECT * FROM EMP WHERE SAL >= 2000 and SAL <= 3000;
SELECT * FROM EMP WHERE SAL BETWEEN 2000 and 3000;
-- 반대값
SELECT * FROM EMP WHERE SAL NOT BETWEEN 2000 and 3000;
-- 이름이 S로 끝나는 데이터 조회
SELECT * FROM EMP WHERE ENAME LIKE '%s';
-- 이름이 S로 시작하는 데이터 조회
SELECT * FROM EMP WHERE ENAME LIKE 's%';
-- 와일드 카드 사이의 문자(열)이 포함된 모든 데이터 추출
SELECT * FROM EMP WHERE ENAME LIKE '%s%';
-- 와일드 카드 사이의 문자(열)이 포함(안)된 모든 데이터 추출
SELECT * FROM EMP WHERE ENAME NOT LIKE '%s%';

*집합연산 : 두개 이상의 SELECT문의 결과 값을 연결할 떄 사용
주의점 : 열 개수와 각 열의 자료형이 순서별로 일치해야한다. 
-- COMM값이 null
SELECT * FROM EMP WHERE COMM is NULL;
-- 반대값
SELECT * FROM EMP WHERE COMM IS NOT NULL;
-- 두개 값을 한번에 출력하고 싶을떄
SELECT EMPNO, ENAME, SAL, DEPTNO FROM EMP WHERE DEPTNO = 10
UNION
SELECT EMPNO, ENAME, SAL, DEPTNO FROM EMP WHERE DEPTNO = 20;

UNION 종류
UNION 연결된 SELECT문의 결과 값을 합집합으로 묶어준다. 결과 값의 중복은 제거된다.
값이 같은걸 붙이면 중복제거 후 출력
UNION ALL : 연결된 SELECT문의 결과 값을 합집합으로 묶어준다. 
중복된 결과값도 제거 없이 모두 출력한다. 
값이 같은걸 붙여도 모두 출력

*대소문자를 바꿔주는 UPPER, LOWER함수
SELECT ENAME, UPPER(ENAME), LOWER(ENAME);

문자열 일부를 추출하는 SUBSTR함수
SUBSTR(문자열 데이터, 시작위치, 추출길이)
SUBSTR(문자열 데이터, 시작위치)
SELECT ENAME, LENGTH(ENAME) FROM EMP;
-- 특정문자를 다른 문자로 바꿔어 주는 함수 REPLACE함수
SELECT '010-1234-5678' as REPLACE_BEFORE ,
       REPLACE('010-1234-5678', '-','  ' ) as REPLACE_AFTER,
REPLACE('010-1234-5678','-','') as REPLACE_AFTER2;

-- JOB이 CLERK인 데이터 조회
SELECT * FROM EMP WHERE JOB = 'CLERK';
-- sal이 1000이상인 데이터 조회
SELECT * FROM EMP WHERE SAL >= 1000;
-- COMM이 NULL인 데이터만 조회
SELECT * FROM EMP WHERE COMM is NULL;
-- COMM이 NULL이 아닌 데이터 조회
SELECT * FROM EMP WHERE COMM is NOT NULL;
-- 사원이름(ENAME)에서 R로 끝나는 데이터 조회
SELECT * FROM EMP WHERE ENAME like '%R';
-- 이름이 M으로 시작, 부서번호가 10인 사람
SELECT * FROM EMP WHERE ENAME like 'm%' and DEPTNO = 10 ;
-- 연봉이 1000~2000인 데이터 between사용
SELECT * FROM EMP WHERE SAL BETWEEN 1000 and 2000;
-- 연봉이 1000~2000이 데이터 부등호
SELECT * FROM EMP WHERE SAL >= 1000 and SAL <= 2000;
-- 연봉이 1000과 2000 데이터 in사용
SELECT * FROM EMP WHERE SAL IN (1000,2000);
-- 부서본호 중복제거
SELECT DISTINCT DEPTNO From EMP;
-- 연봉순 정렬 각각 오름차순, 내림차순
SELECT * FROM EMP ORDER BY SAL;  -- 기본값 오름차순
SELECT * FROM EMP ORDER BY SAL DESC;

-- 날짜 데이터를 다루는 함수
SELECT SYSDATE() AS NOW,
       DATE_SUB(SYSDATE(), INTERVAL 1 DAY)  as YESTERDAY,
                DATE_ADD(SYSDATE(), INTERVAL 1 DAY)  as TOMORROW;

-- 몇 개월 이후 날짜를 구하는 DATE_ADD
SELECT EMPNO, ENAME, HIREDATE, DATE_ADD(HIREDATE,INTERVAL 120 MONTH) AS WORK10YEAR FROM EMP;

-- 32년(384개월)이 되지 않은 사원 이름 출력
SELECT ENAME FROM EMP WHERE DATE_ADD(HIREDATE, INTERVAL 384 MONTH)<=SYSDATE();

-- SUM()함수
SELECT SUM(SAL) FROM EMP;
-- 데이터 갯수
SELECT COUNT(*) FROM EMP;
-- MAX(), MIN함수
SELECT MAX(SAL) FROM EMP;
SELECT MIN(SAL) FROM EMP;
-- 평균
SELECT AVG(SAL) FROM EMP;

-- 문제 입사일이 (hiredate) 80-12-17 이상인 데이터 조회
SELECT * FROM EMP WHERE HIREDATE >= '80-12-17';







































show databases;
CREATE DATABASE learn_database
CHARACTER SET utf8mb4
COLLATE utf8mb4_unicode_ci;

use learn_database;

show tables;
CREATE TABLE EMP (
                     EMPNO INT NOT NULL,
                     ENAME VARCHAR(10),
                     JOB VARCHAR(9),
                     MGR INT,
                     HIREDATE DATE,
                     SAL DECIMAL(7, 2),
                     COMM DECIMAL(7, 2),
                     DEPTNO INT,
                     PRIMARY KEY (EMPNO)
);
INSERT INTO EMP VALUES (7839, 'KING', 'PRESIDENT', NULL, '1981-11-17', 5000, NULL, 10);
INSERT INTO EMP VALUES (7566, 'JONES', 'MANAGER', 7839, '1981-04-02', 2975, NULL, 20);
INSERT INTO EMP VALUES (7698, 'BLAKE', 'MANAGER', 7839, '1981-05-01', 2850, NULL, 30);
INSERT INTO EMP VALUES (7782, 'CLARK', 'MANAGER', 7839, '1981-06-09', 2450, NULL, 10);
INSERT INTO EMP VALUES (7788, 'SCOTT', 'ANALYST', 7566, '1987-07-13', 3000, NULL, 20);
INSERT INTO EMP VALUES (7902, 'FORD', 'ANALYST', 7566, '1981-12-03', 3000, NULL, 20);
INSERT INTO EMP VALUES (7844, 'TURNER', 'SALESMAN', 7698, '1981-09-08', 1500, 0, 30);
INSERT INTO EMP VALUES (7900, 'JAMES', 'CLERK', 7698, '1981-12-03', 950, NULL, 30);
INSERT INTO EMP VALUES (7654, 'MARTIN', 'SALESMAN', 7698, '1981-09-28', 1250, 1400, 30);
INSERT INTO EMP VALUES (7499, 'ALLEN', 'SALESMAN', 7698, '1981-02-20', 1600, 300, 30);
INSERT INTO EMP VALUES (7521, 'WARD', 'SALESMAN', 7698, '1981-02-22', 1250, 500, 30);
INSERT INTO EMP VALUES (7934, 'MILLER', 'CLERK', 7782, '1982-01-23', 1300, NULL, 10);
INSERT INTO EMP VALUES (7876, 'ADAMS', 'CLERK', 7788, '1987-07-13', 1100, NULL, 20);
INSERT INTO EMP VALUES (7658, 'CHEN', 'SALESMAN', 7698, '1981-09-08', 2500, 1500, 30);

CREATE TABLE DEPT (
                      DEPTNO INT NOT NULL,
                      DNAME VARCHAR(14),
                      LOC VARCHAR(13),
                      PRIMARY KEY (DEPTNO)
);

INSERT INTO DEPT VALUES (10, 'ACCOUNTING', 'NEW YORK');
INSERT INTO DEPT VALUES (20, 'RESEARCH', 'DALLAS');
INSERT INTO DEPT VALUES (30, 'SALES', 'CHICAGO');
INSERT INTO DEPT VALUES (40, 'OPERATIONS', 'BOSTON');

CREATE TABLE SALGRADE (
                          GRADE INT NOT NULL,
                          LOSAL DECIMAL(7, 2),
                          HISAL DECIMAL(7, 2),
                          PRIMARY KEY (GRADE)
);

INSERT INTO SALGRADE VALUES (1, 700, 1200);
INSERT INTO SALGRADE VALUES (2, 1201, 1400);
INSERT INTO SALGRADE VALUES (3, 1401, 2000);
INSERT INTO SALGRADE VALUES (4, 2001, 3000);
INSERT INTO SALGRADE VALUES (5, 3001, 9999);

CREATE TABLE BONUS (
                       ENAME VARCHAR(10),
                       JOB VARCHAR(9),
                       SAL DECIMAL(7, 2),
                       COMM DECIMAL(7, 2)
);


INSERT INTO BONUS VALUES ('ALLEN', 'SALESMAN', 1600, 300);
INSERT INTO BONUS VALUES ('WARD', 'SALESMAN', 1250, 500);
INSERT INTO BONUS VALUES ('JONES', 'MANAGER', 2975, NULL);

